This files explains how to compile and install QCM.

1) The distribution can be obtained from bitbucket:

git clone https://dsenech@bitbucket.org/dsenechQCM/qcm_wed.git 

2) It is advised to create a python virtual environment and to work within such an environment. To create such an environment called q_env in your root directory, execute

python3 -m venv q_env/

Then to launch this environment, execute

source q_env/bin/activate

If you want this to be activated every time a new terminal is launched, just add the above command at the end of your .bashrc or .zshrc, depending on which shell you use.

Within this environment, you shoud install numpy, scipy, matplotlib, cmake and ninja using pip, e.g.:

pip install numpy
pip install cmake

etc.

Make sure you have the latest version of pip, by executing

pip install --upgrade pip


3) CUBA
fetch CUBA at http://www.feynarts.de/cuba/ (take the latest version) and decompress locally.
the run ./configure and then edit the makefile it produces by adding the option -fPIC 
in two places, i.e. at the end of the lines that start with CFLAGS and LIBS, respectively, like so:

CFLAGS = -O3 -fomit-frame-pointer -ffast-math -Wall -DHAVE_CONFIG_H -DREALSIZE=8 -I$(common) -I. -I$(srcdir) -fPIC
LIBS = -lm -fPIC -Wl,-z,muldefs

Note that the option "-Wl,-z,muldefs" has to be added too at the link step (LIBS) in order to use the latest versions of some operating systems (e.g. centOS8).

This change is necessary if CUBA is to be loaded as part of a dynamic library.
Then run 'make lib' and move the resulting static library 'libcuba.a' to $HOME/lib/

Also: define the environment variable
export CUBACORES=0
in your shell initialization (e.g. .bash_profile, .bashrc, .zsh_profile, .zshrc, .zprofile, etc.)
   
4) Go to the qcm_wed folder and execute

pip install .
